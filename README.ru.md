![Static Badge](https://img.shields.io/badge/Python-3.12%2B-blue)
![MIT license](https://img.shields.io/badge/License-MIT-blue.svg)
# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
library/
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ README.ru.md
‚îú‚îÄ‚îÄ app
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ core
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ database.py
‚îÇ   ‚îú‚îÄ‚îÄ models
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ customer.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loan.py
‚îÇ   ‚îú‚îÄ‚îÄ routers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ books.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ customers.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loans.py
‚îÇ   ‚îú‚îÄ‚îÄ schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ book.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ customer.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ loan.py
‚îÇ   ‚îî‚îÄ‚îÄ services
‚îÇ       ‚îú‚îÄ‚îÄ book_service.py
‚îÇ       ‚îú‚îÄ‚îÄ customer_service.py
‚îÇ       ‚îî‚îÄ‚îÄ loan_service.py
‚îú‚îÄ‚îÄ db
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ init.sql
‚îÇ   ‚îî‚îÄ‚îÄ procedures.sql
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ docs
    ‚îú‚îÄ‚îÄ api.md
    ‚îî‚îÄ‚îÄ api.ru.md
```

### –û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:

- **`LICENSE`**: –õ–∏—Ü–µ–Ω–∑–∏—è MIT –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞.  
- **`README.md`**: –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ.  
- **`README.ru.md`**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.  
- **`app/`**: –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ FastAPI.  
  - **`Dockerfile`**: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Docker –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI.  
  - **`main.py`**: –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–∞—Ä—à—Ä—É—Ç–æ–≤.  
  - **`requirements.txt`**: –°–ø–∏—Å–æ–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python.  
  - **`core/`**: –û—Å–Ω–æ–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è.  
    - **`database.py`**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏.  
  - **`models/`**: ORM-–º–æ–¥–µ–ª–∏ SQLAlchemy, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü–∞–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.  
    - **`book.py`**, **`customer.py`**, **`loan.py`**: –ú–æ–¥–µ–ª–∏ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.  
  - **`routers/`**: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (API endpoints).  
    - **`books.py`**, **`customers.py`**, **`loans.py`**: –†–æ—É—Ç–µ—Ä—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏.  
  - **`schemas/`**: Pydantic-—Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤.  
    - –ü–æ–≤—Ç–æ—Ä—è—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `models/` –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏.  
  - **`services/`**: –°–ª–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏, –æ—Ç–¥–µ–ª—è—é—â–∏–π –µ—ë –æ—Ç –º–∞—Ä—à—Ä—É—Ç–æ–≤.  
    - –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–Ω–∏–≥–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∑–∞–π–º–∞–º–∏.  
- **`db/`**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.  
  - **`Dockerfile`**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.  
  - **`init.sql`**: SQL-—Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –∏ –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è.  
  - **`procedures.sql`**: –°–æ–¥–µ—Ä–∂–∏—Ç —Ö—Ä–∞–Ω–∏–º—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.  
- **`docker-compose.yml`**: –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤ FastAPI –∏ PostgreSQL.  
- **`docs/`**: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –∏ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–∞—Ö.  

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker  
- Docker Compose

### –ó–∞–ø—É—Å–∫

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```sh
   git clone https://github.com/andreypomortsev/library.git
   cd library
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã:
   ```sh
   docker compose up --build
   ```

3. FastAPI –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000`.  
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000/docs`.

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ù–∏–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞:

#### –¢–∞–±–ª–∏—Ü–∞: `customers`

| –ö–æ–ª–æ–Ω–∫–∞      | –¢–∏–ø           | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è                    |
|--------------|----------------|--------------------------------|
| id           | SERIAL         | PRIMARY KEY                    |
| name         | VARCHAR(100)   | NOT NULL                       |
| last_name    | VARCHAR(100)   | NOT NULL                       |
| middle_name  | VARCHAR(100)   |                                |
| birth_year   | INTEGER        | NOT NULL                       |
| is_author    | BOOLEAN        | NOT NULL, DEFAULT FALSE        |

#### –¢–∞–±–ª–∏—Ü–∞: `books`

| –ö–æ–ª–æ–Ω–∫–∞   | –¢–∏–ø          | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è                          |
|-----------|---------------|--------------------------------------|
| id        | SERIAL        | PRIMARY KEY                          |
| title     | VARCHAR(255)  | NOT NULL                             |
| author_id | INTEGER       | REFERENCES customers(id)             |
| genre     | VARCHAR(255)  | NOT NULL                             |
| year      | INTEGER       | NOT NULL                             |
| status    | BOOLEAN       | NOT NULL, DEFAULT TRUE               |

#### –¢–∞–±–ª–∏—Ü–∞: `loans`

| –ö–æ–ª–æ–Ω–∫–∞     | –¢–∏–ø     | –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è                           |
|-------------|----------|----------------------------------------|
| id          | SERIAL   | PRIMARY KEY                            |
| book_id     | INTEGER  | REFERENCES books(id), NOT NULL         |
| user_id     | INTEGER  | REFERENCES customers(id), NOT NULL     |
| loan_date   | DATE     | NOT NULL, DEFAULT CURRENT_DATE         |
| return_date | DATE     | DEFAULT NULL                           |

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ–¥—Ä–æ–±–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:  
‚û°Ô∏è [–°–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](docs/api.ru.md)

## –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è –ª—é–±—ã–µ —É–ª—É—á—à–µ–Ω–∏—è! –°–¥–µ–ª–∞–π—Ç–µ —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ Pull Request.

## –ê–≤—Ç–æ—Ä

- [–ê–Ω–¥—Ä–µ–π –ü–æ–º–æ—Ä—Ü–µ–≤](https://www.linkedin.com/in/andreypomortsev/)

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π MIT ‚Äì –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ —Ñ–∞–π–ª–µ [LICENSE](./LICENSE).